<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://public-frontend-cos.metadl.com/mgx/img/favicon.png" type="image/png">
    <title>Free Program </title>
    <link rel="stylesheet" href="./style.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
</head>

<body>
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
    </div>

    <nav id="navbar" class="navbar hidden">
        <div class="nav-container">
            <div class="nav-brand">
                <h2>Free Program</h2>
            </div>
            <div class="nav-menu">
                <span id="userEmail" class="user-info"></span>
                <span id="userRole" class="user-role"></span>
                <button id="logoutBtn" class="btn btn-secondary">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </nav>

    <div id="loginSection" class="login-section">
        <div class="login-container">
            <div class="login-card">
                <h1>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h1>
                <p>Login ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ü‡∏£‡∏µ</p>
                
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                        <input type="password" id="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                </form>
            </div>
        </div>
    </div>

    
    <div id="mainContent" class="main-content hidden">
        <div id="adminPanel" class="admin-panel hidden">
            <div class="admin-header">
                <h2>üõ†Ô∏è ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <div class="admin-tabs">
                    <button class="tab-btn active" data-tab="programs">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
                    <button class="tab-btn" data-tab="users">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                </div>
            </div>

            <div id="programsTab" class="tab-content active">
                <div class="section-header">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</h3>
                    <button id="addProgramBtn" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
                </div>
                
                <!-- Search for Admin Programs -->
                <!-- <div class="search-container">
                    <div class="search-input-wrapper">
                        <span class="search-icon">
                        <input type="text" id="adminProgramSearchInput" class="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°... (‡∏ä‡∏∑‡πà‡∏≠, ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢, ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô)">
                        <button type="button" id="clearAdminSearch" class="clear-search hidden">‚úï</button>
                    </div>
                </div> -->
                
                <div id="adminProgramsList" class="admin-programs-list">
                </div>
            </div>

            <div id="usersTab" class="tab-content">
                <div class="section-header">
                    <h3>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h3>
                    <button id="addUserBtn" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                </div>
                
                <!-- Search for Users -->
                <!-- <div class="search-container">
                    <div class="search-input-wrapper">
                        <span class="search-icon">
                        <input type="text" id="userSearchInput" class="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å... (‡∏ä‡∏∑‡πà‡∏≠, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•)">
                        <button type="button" id="clearUserSearch" class="clear-search hidden">‚úï</button>
                    </div>
                </div> -->
                
                <div id="usersList" class="users-list">
                </div>
            </div>
        </div>

        <div id="userPanel" class="user-panel">
            <div class="user-header">
                <div class="header-text">
                    <h2>üì¶ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ü‡∏£‡∏µ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô </h2>
                    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</p>
                </div>

                <button id="userChangePasswordBtn" class="btn btn-secondary btn-sm">
                    ‚öôÔ∏è ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                </button>
            </div>
            
            <!-- Search for User Programs -->
            <div class="search-container">
                <div class="search-input-wrapper">
                    <span class="search-icon">
                    <input type="text" id="programSearchInput" class="search-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°...">
                    <!-- <button type="button" id="clearProgramSearch" class="clear-search hidden">‚úï</button> -->
                </div>
            </div>
            
            <div id="programsList" class="programs-list">
            </div>
        </div>
    </div>
    
    <div id="addProgramModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
                <span class="close">&times;</span>
            </div>
            <form id="addProgramForm">
                <div class="form-group">
                    <label for="programName">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°:</label>
                    <input type="text" id="programName" required>
                </div>
                <div class="form-group">
                    <label for="programDescription">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:</label>
                    <textarea id="programDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="programVersion">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:</label>
                    <input type="text" id="programVersion" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addProgramModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <div id="editProgramModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</h3>
                <span class="close">&times;</span>
            </div>
            <form id="editProgramForm">
                <input type="hidden" id="editProgramId">
                <div class="form-group">
                    <label for="editProgramName">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°:</label>
                    <input type="text" id="editProgramName" required>
                </div>
                <div class="form-group">
                    <label for="editProgramDescription">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:</label>
                    <textarea id="editProgramDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="editProgramVersion">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:</label>
                    <input type="text" id="editProgramVersion" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('editProgramModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</h3>
                <span class="close">&times;</span>
            </div>
            <form id="addUserForm">
                <div class="form-group">
                    <label for="newUserEmail">‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</label>
                    <input type="email" id="newUserEmail" required>
                </div>
                <div class="form-group">
                    <label for="newUserPassword">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                    <input type="password" id="newUserPassword" required>
                </div>
                <div class="form-group">
                    <label for="newUserDisplayName">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á:</label>
                    <input type="text" id="newUserDisplayName" required>
                </div>
                <div class="form-group">
                    <label for="newUserRole">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå:</label>
                    <select id="newUserRole" required>
                        <option value="user">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                        <option value="admin">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addUserModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
<div id="customDialogModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="dialogTitle">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h3>
            <span class="close" onclick="closeModal('customDialogModal')">&times;</span>
        </div>
        <form id="customDialogForm">
            <div class="modal-body">
                <p id="dialogMessage" style="margin-bottom: 2rem; color: var(--text-light);">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
                
                <div id="dialogInputGroup" class="form-group hidden">
                    <label id="dialogInputLabel" for="dialogInput">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label>
                    <input type="password" id="dialogInput" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                </div>
            </div>
            
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" onclick="customDialog.reject()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="submit" class="btn btn-danger" id="dialogConfirmBtn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            </div>
        </form>
    </div>
</div>
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
                <span class="close">&times;</span>
            </div>
            <form id="changePasswordForm">
                <input type="hidden" id="changePasswordUid">
                <p id="changePasswordUserEmail" style="font-weight: 600; color: var(--primary-dark);"></p>
                
                <div class="form-group">
                    <label for="currentPassword">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</label>
                    <input type="password" id="currentPassword" required>
                </div>
                
                <div class="form-group">
                    <label for="newPassword">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà:</label>
                    <input type="password" id="newPassword" minlength="6" required>
                </div>
                <div class="form-group">
                    <label for="confirmNewPassword">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà:</label>
                    <input type="password" id="confirmNewPassword" minlength="6" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('changePasswordModal')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>
    <div id="alertContainer" class="alert-container"></div>

    <script src="./firebase-config.js"></script>
    <script src="./script.js"></script>
</body>

</html>