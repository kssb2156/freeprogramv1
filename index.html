<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freeprogram</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="loading" class="loading">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
        </div>
    </div>

    <nav id="navbar" class="navbar hidden">
        <div class="nav-container">
            <div class="nav-brand">
                <h2>Free Program</h2>
            </div>
            <div class="nav-menu">
                <div class="user-info">
                    <span id="userEmail"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="720701170032170a131f021e175c111d1f">[email&#160;protected]</a></span>
                    <span id="userRole" class="user-role">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
                </div>
                <button id="logoutBtn" class="btn btn-secondary">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </nav>

    <div id="quickNav" class="quick-nav hidden">
        <button class="quick-nav-btn" onclick="scrollToSection('userPanel')" title="‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°">
            üìÅ
            <span class="tooltip">‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</span>
        </button>
        <!-- <button class="quick-nav-btn" onclick="scrollToSection('adminPanel')" title="‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô">
            ‚öôÔ∏è
            <span class="tooltip">‡πÅ‡∏ú‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</span>
        </button> -->
        <button class="quick-nav-btn" onclick="switchTabAndScroll('programs')" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°">
            üìã
            <span class="tooltip">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</span>
        </button>
        <button class="quick-nav-btn" onclick="switchTabAndScroll('users')" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å">
            üë•
            <span class="tooltip">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
        </button>
        <button class="quick-nav-btn" onclick="openModal('addUserModal')" title="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà">
            ‚ûï
            <span class="tooltip">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</span>
        </button>
    </div>

    <button id="backToTop" class="back-to-top" onclick="scrollToTop()">
        ‚Üë
    </button>

    <main id="mainContent" class="main-content hidden">
        <div class="container">
            <section id="userPanel" class="user-panel">
                <div class="user-header">
                    <div class="header-info">
                        <h2>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</h2>
                        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</p>
                        <button id="userChangePasswordBtn" class="btn btn-secondary btn-sm" style="margin-top: 12px;">
                            üîë ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                        </button>
                    </div>
                    <div class="search-container">
                        <div class="search-wrapper">
                            <input type="text" id="programSearchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°...">
                            <button id="clearProgramSearch" class="clear-search-btn hidden">‚úï</button>
                        </div>
                    </div>
                </div>
                <div id="programsList" class="programs-list">
                    </div>
            </section>

            <section id="adminPanel" class="admin-panel hidden">
                <div class="admin-header">
                    <h2>‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h2>
                    <div class="admin-quick-actions">
                        <button id="quickAddProgram" class="btn btn-success btn-sm" onclick="openModal('addProgramModal')">
                            ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
                        </button>
                        <!-- <button id="quickAddUser" class="btn btn-primary btn-sm" onclick="openModal('addUserModal')">
                            üë§ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                        </button> -->
                    </div>
                </div>
                
                <div class="admin-tabs">
                    <button class="tab-btn active" data-tab="programs">üìã ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
                    <button class="tab-btn" data-tab="users">üë• ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                </div>

                <div id="programsTab" class="tab-content active">
                    <div class="section-header">
                        <h3>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h3>
                        <button id="addProgramBtn" class="btn btn-primary">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
                    </div>
                    <div class="search-container">
                        <div class="search-wrapper">
                            <input type="text" id="adminProgramSearchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°...">
                            <button id="clearAdminSearch" class="clear-search-btn hidden">‚úï</button>
                        </div>
                    </div>
                    <div id="adminProgramsList" class="admin-programs-list">
                        </div>
                </div>

                <div id="usersTab" class="tab-content">
                    <div class="section-header">
                        <h3>‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</h3>
                        <button id="addUserBtn" class="btn btn-primary">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                    </div>
                    <div class="search-container">
                        <div class="search-wrapper">
                            <input type="text" id="userSearchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å...">
                            <button id="clearUserSearch" class="clear-search-btn hidden">‚úï</button>
                        </div>
                    </div>
                    <div id="usersList" class="users-list">
                        </div>
                </div>
            </section>
        </div>
    </main>

    <div id="addProgramModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
                <span class="close">&times;</span>
            </div>
            <form id="addProgramForm">
                <div class="form-group">
                    <label for="programName">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</label>
                    <input type="text" id="programName" required>
                </div>
                <div class="form-group">
                    <label for="programDescription">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                    <textarea id="programDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="programVersion">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</label>
                    <input type="text" id="programVersion" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</button>
                </div>
            </form>
        </div>
    </div>

    <div id="editProgramModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</h3>
                <span class="close">&times;</span>
            </div>
            <form id="editProgramForm">
                <input type="hidden" id="editProgramId">
                <div class="form-group">
                    <label for="editProgramName">‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°</label>
                    <input type="text" id="editProgramName" required>
                </div>
                <div class="form-group">
                    <label for="editProgramDescription">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                    <textarea id="editProgramDescription" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="editProgramVersion">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</label>
                    <input type="text" id="editProgramVersion" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                </div>
            </form>
        </div>
    </div>

    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</h3>
                <span class="close">&times;</span>
            </div>
            <form id="addUserForm">
                <div class="form-group">
                    <label for="newUserEmail">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                    <input type="email" id="newUserEmail" required>
                </div>
                <div class="form-group">
                    <label for="newUserPassword">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                    <input type="password" id="newUserPassword" required>
                </div>
                <div class="form-group">
                    <label for="newUserDisplayName">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á</label>
                    <input type="text" id="newUserDisplayName" required>
                </div>
                <div class="form-group">
                    <label for="newUserRole">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</label>
                    <select id="newUserRole" required>
                        <option value="user">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</option>
                        <option value="admin">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h3>
                <span class="close">&times;</span>
            </div>
            <form id="changePasswordForm">
                <input type="hidden" id="changePasswordUid">
                <p id="changePasswordUserEmail" class="modal-info"></p>
                <div class="form-group">
                    <label for="currentPassword">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirmNewPassword">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                    <input type="password" id="confirmNewPassword" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="btn btn-primary">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</button>
                </div>
            </form>
        </div>
    </div>

    <div id="customDialogModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="dialogTitle">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p id="dialogMessage"></p>
                <div id="dialogInputGroup" class="form-group hidden">
                    <label id="dialogInputLabel" for="dialogInput">‡∏Ñ‡πà‡∏≤</label>
                    <input type="password" id="dialogInput">
                </div>
            </div>
            <form id="customDialogForm">
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary close">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" id="dialogConfirmBtn" class="btn btn-primary">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
                </div>
            </form>
        </div>
    </div>

    <div id="alertContainer" class="alert-container"></div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    
    <script src="firebase-config.js"></script>
    <script src="app.js"></script>
</body>
</html>